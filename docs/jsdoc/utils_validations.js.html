<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>utils/validations.js - Documentation</title>

    <link rel="icon" href="/icons/chords-api-icon.svg" type="image/svg+xml">
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="/" class="returnLink">Return to web</a></h2><h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-utils_logErrors-LogError.html">LogError</a><ul class='methods'><li data-type='method'><a href="module-utils_logErrors-LogError.html#add">add</a></li></ul></li><li><a href="module-utils_resErrors-ResError.html">ResError</a><ul class='methods'><li data-type='method'><a href="module-utils_resErrors-ResError.html#add">add</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-config_logger.html">config/logger</a></li><li><a href="module-config_mongo.html">config/mongo</a></li><li><a href="module-config_swagger.html">config/swagger</a></li><li><a href="module-controllers_chordTypes.html">controllers/chordTypes</a><ul class='methods'><li data-type='method'><a href="module-controllers_chordTypes.html#.getAll">getAll</a></li><li data-type='method'><a href="module-controllers_chordTypes.html#.getById">getById</a></li></ul></li><li><a href="module-controllers_chords.html">controllers/chords</a><ul class='methods'><li data-type='method'><a href="module-controllers_chords.html#.filter">filter</a></li><li data-type='method'><a href="module-controllers_chords.html#.getById">getById</a></li></ul></li><li><a href="module-controllers_notes.html">controllers/notes</a><ul class='methods'><li data-type='method'><a href="module-controllers_notes.html#.getAll">getAll</a></li></ul></li><li><a href="module-databases_mongoConnection.html">databases/mongoConnection</a><ul class='methods'><li data-type='method'><a href="module-databases_mongoConnection.html#.mongoConnection">mongoConnection</a></li></ul></li><li><a href="module-middleware_error.html">middleware/error</a><ul class='methods'><li data-type='method'><a href="module-middleware_error.html#.errorMiddleware">errorMiddleware</a></li></ul></li><li><a href="module-middleware_notFound.html">middleware/notFound</a><ul class='methods'><li data-type='method'><a href="module-middleware_notFound.html#.notFoundMiddleware">notFoundMiddleware</a></li></ul></li><li><a href="module-models_chord.html">models/chord</a><ul class='methods'><li data-type='method'><a href="module-models_chord.html#.chordSchema">chordSchema</a></li><li data-type='method'><a href="module-models_chord.html#.setupNoteVirtual">setupNoteVirtual</a></li><li data-type='method'><a href="module-models_chord.html#.setupTypeVirtual">setupTypeVirtual</a></li></ul></li><li><a href="module-models_chordType.html">models/chordType</a><ul class='methods'><li data-type='method'><a href="module-models_chordType.html#.chordTypeSchema">chordTypeSchema</a></li></ul></li><li><a href="module-models_note.html">models/note</a><ul class='methods'><li data-type='method'><a href="module-models_note.html#.noteSchema">noteSchema</a></li></ul></li><li><a href="module-server.html">server</a><ul class='methods'><li data-type='method'><a href="module-server.html#.runServer">runServer</a></li></ul></li><li><a href="module-services_chordTypes.html">services/chordTypes</a><ul class='methods'><li data-type='method'><a href="module-services_chordTypes.html#.getAll">getAll</a></li><li data-type='method'><a href="module-services_chordTypes.html#.getById">getById</a></li></ul></li><li><a href="module-services_chords.html">services/chords</a><ul class='methods'><li data-type='method'><a href="module-services_chords.html#.filter">filter</a></li><li data-type='method'><a href="module-services_chords.html#.getById">getById</a></li></ul></li><li><a href="module-services_notes.html">services/notes</a><ul class='methods'><li data-type='method'><a href="module-services_notes.html#.getAll">getAll</a></li></ul></li><li><a href="module-utils_logErrors.html">utils/logErrors</a></li><li><a href="module-utils_resErrors.html">utils/resErrors</a></li><li><a href="module-utils_validations.html">utils/validations</a><ul class='methods'><li data-type='method'><a href="module-utils_validations.html#.calculateValidChords">calculateValidChords</a></li><li data-type='method'><a href="module-utils_validations.html#.isValidChordId">isValidChordId</a></li><li data-type='method'><a href="module-utils_validations.html#.isValidChordTypeId">isValidChordTypeId</a></li><li data-type='method'><a href="module-utils_validations.html#.isValidLimit">isValidLimit</a></li><li data-type='method'><a href="module-utils_validations.html#.isValidNoteId">isValidNoteId</a></li><li data-type='method'><a href="module-utils_validations.html#.isValidPage">isValidPage</a></li><li data-type='method'><a href="module-utils_validations.html#.validateChordParam">validateChordParam</a></li><li data-type='method'><a href="module-utils_validations.html#.validateChordTypeParam">validateChordTypeParam</a></li><li data-type='method'><a href="module-utils_validations.html#.validateQueries">validateQueries</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">utils/validations.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Validation function for the Chords API.
 * 
 * @module utils/validations
 */

//Array of valid note Ids
const validNotes = ['a_flat', 'a', 'a_sharp', 'b_flat', 'b', 'c', 'c_sharp', 'd_flat', 'd', 'd_sharp', 'e_flat', 'e', 'f', 'f_sharp', 'g_flat', 'g', 'g_sharp'];

//Array of valid chord type Ids
const validChordTypes = ['major', 'minor', 'dim', '7'];


/**
 * Function to calculate valid chord Ids
 * 
 * It combines all valid notes with all valid chord types to create a list of valid chord Ids.
 * 
 * @memberof module:utils/validations
 * @function
 * @returns {Array} - An array of valid chord Ids.
 */
const calculateValidChords = () => {

    let allValidChords = [];

    for(let i = 0; i &lt; validNotes.length; i++){
        for(let j = 0; j &lt; validChordTypes.length; j++){
            allValidChords.push(validNotes[i] + '_' + validChordTypes[j]);
        }
    }

    return allValidChords;
}

//Array of valid chord Ids (calling to the function)
const validChords = calculateValidChords();

//---------- VALIDATE SINGLE VALUES ----------//

/**
 * Validate chord id
 * 
 * This function checks if the provided chordId is valid by comparing it against a list of valid chords.
 * 
 * @memberof module:utils/validations
 * @function
 * @param {String} chordId - The chord Id to validate.
 * @returns {Boolean} - Returns true if the chordId is valid, false if not.
 */
const isValidChordId = (chordId) => {
    if(!chordId || !validChords.includes(chordId)){
        return false;
    }else{
        return true;
    }
}

/**
 * Validate note id
 * 
 * This function checks if the provided noteId is valid by comparing it against a list of valid notes.
 * 
 * @memberof module:utils/validations
 * @function
 * @param {String} noteId - The note Id to validate.
 * @returns {Boolean} - Returns true if the noteId is valid, false if not.
 */
const isValidNoteId = (noteId) => {
    if(noteId &amp;&amp; !validNotes.includes(noteId)){
        return false;
    }else{
        return true;
    }
}

/**
 * Validate chord type id
 * 
 * This function checks if the provided typeId is valid by comparing it against a list of valid chords types.
 * 
 * @memberof module:utils/validations
 * @function
 * @param {String} typeId - The chord type Id to validate.
 * @returns {Boolean} - Returns true if the typeId is valid, false if not.
 */
const isValidChordTypeId = (typeId) => {
    if(typeId &amp;&amp; !validChordTypes.includes(typeId)){
        return false;
    }else{
        return true;
    }
}

/**
 * Validate limit (number or strnig 'all')
 * 
 * This function checks if the provided 'limit' is a number, 0 or 'all'.
 * 
 * @memberof module:utils/validations
 * @function
 * @param {String|Number} limit - The limit parameter to validate.
 * @returns {Boolean} - Returns true if the limit is valid, false if not.
 */
const isValidLimit = (limit) => {
    if (limit !== undefined &amp;&amp; limit !== 'all' &amp;&amp; (!/^\d+$/.test(limit) || parseInt(limit) &lt; 0)) {
        return false;
    }else{
        return true;
    }
}

/**
 * Validate page (number)
 * 
 * This function checks if the provided 'page' is a correct number.
 * 
 * @memberof module:utils/validations
 * @function
 * @param {Number} page - The "page" parameter to validate.
 * @returns {Boolean} - Returns true if the page is valid, false if not.
 */
const isValidPage = (page) => {
    if (page !== undefined &amp;&amp; (!/^\d+$/.test(page) || parseInt(page) &lt;= 0)) {
        return false;
    }else{
        return true;
    }
}

//---------- VALIDATION FUNCTIONS ----------//

/**
 * Validates all query parameters
 * @param {String} note - The note query parameter to validate.
 * @param {String} type - The type query parameter to validate.
 * @param {String|Number} limit - The limit query parameter to validate.
 * @param {Number} page - The page query parameter to validate.
 * @returns {Array} - Returns an array with a boolean indicating if the validation passed and a message if it failed.
 * @memberof module:utils/validations
 */
const validateQueries = (note, type, limit, page) => {

    if(!isValidNoteId(note)){
        return [
            false, `Invalid format for 'note' query parameter ('${note}'). Expected values: 'c', 'a_sharp', 'g_flat', etc.`];
    }

    if(!isValidChordTypeId(type)){
        return [
            false, `Invalid format for 'type' query parameter ('${type}'). Expected values: 'major', 'minor', etc.`];
    }

    if(!isValidLimit(limit)){
        return [
            false, `Invalid format for 'limit' query parameter ('${limit}'). Expected values: 'all', '2', '3', etc.`
        ]
    }

    if(!isValidPage(page)){
        return [
            false, `Invalid format for 'page' query parameter ('${page}'). Expected values: '1', '2', '3', etc.`
        ]
    }

    return [true];

}

/**
 * Validate chord id path parameter
 * @param {String} chordId - The chordId parameter to validate.
 * @returns {Array} - Returns an array with a boolean indicating if the validation passed and a message if it failed.
 * @memberof module:utils/validations
 */
const validateChordParam = (chordId) => {

    if(!isValidChordId(chordId)){
        return [
            false, 
            `Invalid format for 'chord Id' path parameter ('${chordId}'). Expected values: 'c_major', 'a_sharp_minor', 'g_flat_dim', 'f_7' etc.`
        ];
    }

    return [true];
}

/**
 * Validate chord type id path parameter
 * @param {String} chordTypeId - The chordTypeId path parameter to validate.
 * @returns {Array} - Returns an array with a boolean indicating if the validation passed and a message if it failed.
 * @memberof module:utils/validations
 */
const validateChordTypeParam = (chordTypeId) => {
    
    if(!isValidChordTypeId(chordTypeId)){
        return [
            false, 
            `Invalid format for 'type Id' path parameter ('${chordTypeId}'). Expected values: 'major', 'minor', etc.`
        ];
    }
    return [true];
}


module.exports = {validateQueries, validateChordParam, validateChordTypeParam};</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Fri Apr 11 2025 16:03:19 GMT+0200 (hora de verano de Europa central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
